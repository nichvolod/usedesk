<script type='text/javascript'>
  (function() {
    var widget_id = "{{settings.widgetId}}";
    var dom = "{{settings.domain}}";
    if (!widget_id) {
      console.error('Warning: No Usedesk Widget ID is defined. Please configure it in the apps admin')
    } else {
      var d = document;
      var w = window;
      function l() {
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src='//lib.' + dom + '/secure.usedesk.ru/'+ widget_id + '.js';
        var ss = document.getElementsByTagName('script')[0];
        ss.parentNode.insertBefore(s, ss);
      }

      if (d.readyState=='complete') {
        l();
      } else {
        if (w.attachEvent) {
          w.attachEvent('onload',l);
        } else {
          w.addEventListener('load',l,false);
        }
      }
    }
  })();
</script>